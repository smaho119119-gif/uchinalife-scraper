# スマホ119 店舗表示機能 📱

## 実装日時
2025-11-28 15:49

## 実装内容

### ✅ スマホ119 8店舗をマップに表示

#### 店舗一覧
1. **宜野湾店（本社）** - 沖縄県宜野湾市上原1-6-3
2. **名護店** - 沖縄県名護市見取川原4472 イオン名護店 1F
3. **泡瀬店** - 沖縄県沖縄市泡瀬4-5-7 イオンタウン泡瀬店
4. **石川店** - 沖縄県うるま市石川2-24-5
5. **うるま店** - 沖縄県うるま市江洲507 うるまシティプラザ1F
6. **西原店** - 沖縄県中頭郡西原町小波津616-3-1F
7. **糸満店** - 沖縄県糸満市潮平780-5
8. **とよみ店** - 沖縄県豊見城市根差部710 イオンタウンとよみ1F

### 🎨 デザイン

#### トグルボタン
```tsx
<Button
    onClick={() => setShowStores(!showStores)}
    variant={showStores ? "default" : "outline"}
    className={showStores ? 
        "bg-amber-500 border-amber-700" :  // 表示中: アンバー色
        "border-amber-600 text-amber-700"   // 非表示: アウトライン
    }
>
    {showStores ? '✓ 表示中' : '店舗を表示'}
</Button>
```

#### 店舗マーカー
- **色**: アンバー/オレンジ (#f59e0b)
- **枠線**: 濃いアンバー (#d97706) 4px
- **アイコン**: 📱 絵文字
- **サイズ**: 36x36px（物件マーカーより大きい）
- **形状**: 円形（物件マーカーとの差別化）

### 🗺️ マップ表示

#### 物件マーカー vs 店舗マーカー

| 項目 | 物件マーカー | 店舗マーカー |
|------|-------------|-------------|
| 形状 | ティアドロップ型 | 円形 |
| サイズ | 28x28px | 36x36px |
| 色 | カテゴリ別（赤、青、緑など） | アンバー (#f59e0b) |
| アイコン | 賃/売 | 📱 |
| 枠線 | 2px 白 | 4px 濃いアンバー |

#### ポップアップ内容
```html
📱 スマホ119 宜野湾店（本社）
住所: 沖縄県宜野湾市上原1-6-3
営業時間: 10:00-19:00
```

### 💻 実装詳細

#### 1. データ構造
```typescript
const SUMAHO119_STORES = [
    {
        name: '宜野湾店（本社）',
        address: '沖縄県宜野湾市上原1-6-3',
        coordinates: [26.2815, 127.7781] as [number, number]
    },
    // ... 他7店舗
];
```

#### 2. 状態管理
```typescript
const [showStores, setShowStores] = useState(false);
```

#### 3. MapViewへの渡し方
```typescript
<MapView
    markers={filteredMarkers}
    onMarkerClick={setSelectedProperty}
    selectedRegion={selectedRegion}
    stores={showStores ? SUMAHO119_STORES : []}  // トグルで制御
/>
```

#### 4. マーカーレンダリング
```typescript
stores.forEach((store) => {
    const storeIcon = L.divIcon({
        className: 'store-marker',
        html: `円形のアンバーマーカー`,
        iconSize: [36, 36],
        iconAnchor: [18, 18],
    });

    L.marker(store.coordinates, { icon: storeIcon })
        .addTo(mapRef.current!)
        .bindPopup(`店舗情報`);
});
```

### 🎯 ユーザー体験

#### 初期状態
- 店舗マーカーは非表示
- 「店舗を表示」ボタンが表示される

#### ボタンクリック後
1. ボタンが「✓ 表示中」に変わる
2. 8つの店舗マーカーがマップに表示される
3. 店舗名リストが表示される

#### 再度クリック
- 店舗マーカーが非表示になる
- ボタンが「店舗を表示」に戻る

### 📍 座標情報

各店舗の座標は、住所から推定した概算値です：

| 店舗 | 緯度 | 経度 |
|------|------|------|
| 宜野湾店 | 26.2815 | 127.7781 |
| 名護店 | 26.5919 | 127.9772 |
| 泡瀬店 | 26.3344 | 127.8508 |
| 石川店 | 26.4319 | 127.8308 |
| うるま店 | 26.3719 | 127.8508 |
| 西原店 | 26.2181 | 127.7614 |
| 糸満店 | 26.1247 | 127.6647 |
| とよみ店 | 26.1614 | 127.6672 |

### 🎨 UI配置

```
┌─────────────────────────────────────┐
│ 📍 地域を選択                        │
│ [沖縄本島] [那覇・南部] [中部] [北部]  │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│ 📱 スマホ119 店舗    [✓ 表示中]      │
│ • 宜野湾店（本社） • 名護店           │
│ • 泡瀬店          • 石川店           │
│ • うるま店        • 西原店           │
│ • 糸満店          • とよみ店         │
└─────────────────────────────────────┘
```

### 🔄 動作フロー

```
1. ユーザーが「店舗を表示」ボタンをクリック
   ↓
2. setShowStores(true) 実行
   ↓
3. MapView に stores={SUMAHO119_STORES} が渡される
   ↓
4. stores.forEach() で8つのマーカーを生成
   ↓
5. マップに店舗マーカーが表示される
   ↓
6. ボタンが「✓ 表示中」に変わる
```

### ✅ 変更ファイル

1. `/src/components/InteractiveMap.tsx`
   - SUMAHO119_STORES データ追加
   - showStores state 追加
   - 店舗トグルボタンUI追加
   - MapView に stores prop を渡す

2. `/src/components/MapView.tsx`
   - StoreLocation interface 追加
   - MapViewProps に stores prop 追加
   - 店舗マーカーレンダリングロジック追加

### 🎯 期待される効果

1. **営業支援**: 店舗の位置を即座に確認可能
2. **顧客案内**: 最寄りの店舗を簡単に案内できる
3. **視覚的**: 物件と店舗の位置関係が一目瞭然
4. **切り替え可能**: 必要な時だけ表示できる

### 📝 今後の拡張案

1. **店舗詳細情報**
   - 電話番号
   - 定休日
   - 駐車場情報

2. **ルート案内**
   - 選択した物件から最寄り店舗へのルート表示
   - Google Maps連携

3. **店舗フィルタ**
   - 特定の店舗のみ表示
   - 店舗ごとの担当エリア表示

4. **店舗クリック時**
   - 店舗詳細パネルを右側に表示
   - 担当スタッフ情報表示

---
**実装完了！** スマホ119の8店舗がマップに表示できるようになりました！📱
